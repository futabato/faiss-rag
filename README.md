# Faissで簡易的なRAG構築

PDF形式の仕様書の情報をもとに、自然言語での質問応答ができる簡易的なRAGシステムを構築する。

## システム概要

- ドキュメント：プレーンテキスト、PDF
- 埋め込みモデル：OpenAIの `text-embedding-ada-002`
- ライブラリ：LangChain
- ベクトルDB：Faiss

| ステップ | 使用技術 | 目的 |
| --- | --- | --- |
| 1. 文書読み込み | `PyMuPDFLoader`（LangChain） | PDF形式の仕様書を読み取り、テキスト化 |
| 2. テキストのチャンク分割 | `RecursiveCharacterTextSplitter` | 長文を適切なサイズのチャンクに分割し、検索精度を高める |
| 3. ベクトル化（Embedding） | `sentence-transformers/all-MiniLM-L6-v2` （HuggingFace） | 各チャンクを意味ベクトルにし、類似検索可能な形式に変換する |
| 4. ベクトル格納 | Faiss | ベクトル化された文書をベクトルDBに保存する |
| 5. LLM連携（生成） | `OpenAI` （LangChain経由でGPT-3.5を利用） | 検索で取得した文書片をもとに、自然な回答を生成する |
| 6. 質問応答 | Retrieva1QA （LangChain） | ユーザの自然言語の質問に対して、文書の構造に基づいた回答を行う |

例えば以下のような質問を実行する：

```jsx
「この仕様書に書かれているエラーコードの107番は何？」
```

この問いに対し、検索されたチャンク内に107番のエラーの記述があれば、該当箇所に基づく回答を生成する。該当がない場合には、「記載されていません」などの回答を返せる。

※ チャンク分割の粒度や、ベクトル検索の設定（TopK件数など）により、回答精度は変動する。